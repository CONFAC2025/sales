# apt-sales-v3 개발 문서

## 1. 개발 목적 (Purpose)

아파트 분양 또는 부동산 영업 조직을 위한 **내부 영업 관리 시스템(CRM)**을 개발합니다. 이 시스템은 여러 영업 조직(본부, 팀)과 다양한 직급(관리자, 본부장, 팀장, 팀원, 협력업체 등)의 사용자들이 자신의 잠재 고객 정보를 효과적으로 등록하고, 고객 상태를 추적하며, 조직 내에서 원활하게 소통할 수 있도록 돕는 것을 목표로 합니다.

## 2. 개발 방향 (Direction)

최신 웹 기술 스택을 사용하여 확장 가능하고 유지보수가 용이한 애플리케이션을 구축합니다.

- **백엔드 (Backend):**
  - **Framework:** Node.js, Fastify
  - **Language:** TypeScript
  - **ORM:** Prisma
  - **Database:** PostgreSQL
  - **Architecture:** JWT 기반 인증, RESTful API, 역할 기반 접근 제어(RBAC)

- **프론트엔드 (Frontend):**
  - **Framework:** React
  - **Language:** TypeScript
  - **Build Tool:** Vite
  - **UI Library:** Material-UI (MUI)
  - **Architecture:** 전역 상태 관리를 통한 컴포넌트 기반 개발

## 3. 주요 기능 및 결과물 (Key Features & Outcome)

- **사용자 인증 및 관리:** 안전한 로그인/회원가입 및 관리자의 사용자 승인 기능
- **조직 관리:** 본부/팀 등 위계적인 조직 구조 관리 기능
- **고객 DB 관리 (CRM):** 영업 담당자별 고객 등록, 상태 변경(등록, 방문, 상담, 계약, 취소) 등 고객 생애주기 관리
- **역할 기반 접근 제어 (RBAC):** 사용자의 직책과 소속에 따라 데이터 접근 권한을 차등 부여
- **내부 커뮤니케이션:** 직원 간 소통을 위한 채팅 기능 (추후 확장)

## 4. 개발 과정 및 태스크 (Process & Tasks)

아래 정의된 태스크에 따라 단계별로 개발을 진행합니다.

---

### Phase 1: 기반 구축 (Foundation) - 완료

- [x] 백엔드: Fastify, TypeScript, Prisma 프로젝트 생성 및 초기 설정
- [x] 백엔드: 데이터베이스 스키마 설계 (User, Customer, Department, Team 등)
- [x] 백엔드: JWT 기반 인증 API 구현 (`/login`, `/register`)
- [x] 백엔드: 관리자용 사용자 승인 API 구현
- [x] 백엔드: 기본 고객(Customer) CRUD API 구현
- [x] 프론트엔드: React, TypeScript, Vite 프로젝트 생성 및 초기 설정
- [x] 프론트엔드: 기본 로그인 UI 및 인증 상태 전역 관리 구현
- [x] 문서: `apt-sales-v3.md` 개발 문서 작성 (현재 완료)

### Phase 2: 핵심 UI 및 기능 구현 (Core UI & Features)

- **Task 2-1: 공통 UI 레이아웃 및 네비게이션**
  - [ ] 상단 앱 바(App Bar) 및 사이드 네비게이션 메뉴(Drawer) 등 공통 레이아웃 컴포넌트 제작
  - [ ] 사용자 역할(`userType`)에 따라 동적으로 메뉴 항목을 표시

- **Task 2-2: 관리자 - 사용자 관리 페이지**
  - [ ] 전체 사용자 목록을 표시하는 관리자 페이지 UI 구현
  - [ ] 사용자 상태(`PENDING`, `APPROVED`)를 명확하게 표시
  - [ ] 관리자가 신규 가입 요청을 승인 또는 거절하는 기능 구현

- **Task 2-3: 고객 관리(CRM) 페이지**
  - [ ] 고객 목록을 표시하는 페이지 UI 구현
  - [ ] 고객 상세 정보 조회 기능 구현
  - [ ] 신규 고객 등록 폼(Form) 및 기능 구현
  - [ ] 기존 고객 정보 수정 기능 구현
  - [ ] 고객 정보 삭제 기능 구현

### Phase 3: 고급 기능 및 개선 (Advanced Features & Refinements)

- **Task 3-1: 역할 기반 접근 제어(RBAC) 강화**
  - [ ] 백엔드: 사용자의 소속(팀/본부)에 따라 해당 고객 정보만 조회되도록 API 로직 수정
  - [ ] 프론트엔드: 백엔드 권한에 맞춰 UI 상에서도 접근이 제한되도록 처리

- **Task 3-2: 조직 관리 페이지**
  - [ ] 관리자가 본부 및 팀을 생성/수정하는 UI 구현
  - [ ] 사용자를 특정 팀/본부에 배치하는 기능 구현

- **Task 3-3: 대시보드 페이지**
  - [ ] 신규 등록 고객 수, 계약 현황 등 핵심 지표를 보여주는 대시보드 UI 디자인 및 구현

### Phase 4: 마무리 (Finalization)

- **Task 4-1: 채팅 기능 (추후 논의)**
  - (세부 기능 및 범위 정의 필요)

- **Task 4-2: 테스트 및 버그 수정**
  - (개발 전 과정에 걸쳐 지속적으로 진행)
